{% extends "chartapp/base.html" %}
{% load static %}

{% block content %}
<div class="container">
    {% if message %}
        <h2>{{ message }}</h2>
    {% else %}
        <canvas id="myChart"></canvas>
    {% endif %}
</div>

{% if not message %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        var ctx = $('#myChart')[0].getContext('2d');
        var chartType = "{{ chart_type }}";
        var chartData = {
            labels: ['1999', '2000', '2001', '2002', '2003', '2004', '2005', '2006', '2007', '2008', '2009', '2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019'],
            datasets: [{
                label: 'Sample Data',
                data: [50, 40, 70, 20, 90, 10, 60, 30, 80, 40],
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgba(75, 192, 192, 1)',
                borderWidth: 1
            }]
        };
        var chartOptions = {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        };

        new Chart(ctx, {
            type: chartType,
            data: chartData,
            options: chartOptions
        });
    });
</script>
{% endif %}
{% endblock %}
